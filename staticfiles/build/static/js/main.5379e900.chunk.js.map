{"version":3,"sources":["styles/NavBar.module.css","App.module.css","assets/logo.png","hooks/useClickOutsideToggle.js","api/axiosDefaults.js","contexts/CurrentUserContext.js","components/NavBar.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","useClickOutsideToggle","expanded","setExpanded","useState","ref","useRef","useEffect","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","axios","defaults","baseURL","headers","post","withCredentials","create","CurrentUserContext","createContext","SetCurrentUserContext","useCurrentUser","useContext","NavBar","currentUser","loggedInIcons","NavLink","styles","Active","_jsxs","_Fragment","children","_jsx","exact","className","activeClassName","to","onClick","loggedOutIcons","Navbar","expand","fixed","Container","fluid","Brand","src","logo","alt","height","Toggle","Collapse","id","Nav","App","Main","Switch","Route","path","render","reportWebVitals","onPerfEntry","Function","then","_ref","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","React","StrictMode","Router","getElementById"],"mappings":"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","file":"static/js/main.5379e900.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"NavBar\":\"NavBar_NavBar__1amC6\",\"Active\":\"NavBar_Active__3PBZb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__16ZpL\",\"Main\":\"App_Main__HQkvd\"};","export default __webpack_public_path__ + \"static/media/logo.c4ef15ac.png\";","import { useEffect, useRef, useState } from 'react';\n\nconst useClickOutsideToggle = () => {    \n    const [expanded, setExpanded] = useState(false);\n    const ref = useRef(null);\n   \n    useEffect(() => {\n        const handleClickOutside = (event) => {            \n            if (ref.current && !ref.current.contains(event.target)){\n                setExpanded(false);\n            }\n        };\n\n        document.addEventListener('mouseup', handleClickOutside);        \n        return () => {\n            document.removeEventListener('mouseup', handleClickOutside);\n        }\n    }, [ref]);\n\n    return { expanded, setExpanded, ref };\n};\n\nexport default useClickOutsideToggle;","// IMPORTANT!!\n // Because this React app is running in the same workspace as the API,\n\n // there is no need to set a separate baseURL until you reach deployment.\n\n // Setting a baseURL before you reach deployment will cause errors\n\nimport axios from \"axios\";\n\naxios.defaults.baseURL = \"/api\";\naxios.defaults.headers.post['Content-Type'] = 'multipart/form-data'\naxios.defaults.withCredentials = true\n\n// Export instances that we'll attach interceptors to. One to intercept the request and one for hte response\nexport const axiosReq = axios.create();\nexport const axiosRes = axios.create();","import { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport axios from \"axios\";\nimport { axiosReq, axiosRes } from \"../api/axiosDefaults\";\nimport { useHistory } from \"react-router-dom\";\nimport { removeTokenTimestamp, shouldRefreshToken } from \"../utils/utils\";\n\nexport const CurrentUserContext = createContext();\nexport const SetCurrentUserContext = createContext();\n\nexport const useCurrentUser = () => useContext(CurrentUserContext);\nexport const useSetCurrentUser = () => useContext(SetCurrentUserContext);\n\nexport const CurrentUserProvider = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState(null);\n  const history = useHistory();\n\n  const handleMount = async () => {\n    try {\n      const { data } = await axiosRes.get(\"/dj-rest-auth/user/\");\n      setCurrentUser(data);\n    } catch (err) {\n      // console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    handleMount();\n  }, []);\n\n  useMemo(() => {\n    axiosReq.interceptors.request.use(\n      async (config) => {\n        if (shouldRefreshToken()){\n          try {\n            await axios.post(\"/dj-rest-auth/token/refresh/\");\n          } catch (err) {\n            setCurrentUser((prevCurrentUser) => {\n              if (prevCurrentUser) {\n                history.push(\"/signin\");\n              }\n              return null;\n            });\n            removeTokenTimestamp();\n            return config;\n          }\n        }\n        \n        return config;\n      },\n      (err) => {\n        return Promise.reject(err);\n      }\n    );\n\n    axiosRes.interceptors.response.use(\n      (response) => response,\n      async (err) => {\n        if (err.response?.status === 401) {\n          try {\n            await axios.post(\"/dj-rest-auth/token/refresh/\");\n          } catch (err) {\n            setCurrentUser((prevCurrentUser) => {\n              if (prevCurrentUser) {\n                history.push(\"/signin\");\n              }\n              return null;\n            });\n            removeTokenTimestamp();\n          }\n          return axios(err.config);\n        }\n        return Promise.reject(err);\n      }\n    );\n  }, [history]);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <SetCurrentUserContext.Provider value={setCurrentUser}>\n        {children}\n      </SetCurrentUserContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n};","import React from \"react\";\nimport styles from \"../styles/NavBar.module.css\";\nimport logo from \"../assets/logo.png\";\nimport useClickOutsideToggle from \"../hooks/useClickOutsideToggle\";\nimport { useCurrentUser, useSetCurrentUser } from \"../contexts/CurrentUserContext\";\n\nimport { Navbar } from \"react-bootstrap\";\nimport { Container } from \"react-bootstrap\";\nimport { Nav } from \"react-bootstrap\";\n\nimport { NavLink } from \"react-router-dom\";\n\nconst NavBar = () => {\n    const currentUser = useCurrentUser();\n    const setCurrentUser = useSetCurrentUser();\n    const {expanded, setExpanded, ref} = useClickOutsideToggle();\n\n    const createAdvertIcon = (\n        <NavLink \n            exact\n            className=\"ml-lg-4\"\n            activeClassName={styles.Active}\n            to=\"/adverts/create\"\n        >\n            <i className=\"fas fa-square-plus\"></i>Create Advert\n        </NavLink>\n    );\n\n    const loggedInIcons = (\n        <>\n            <NavLink \n                exact\n                className=\"ml-lg-4\"\n                activeClassName={styles.Active}\n                to=\"\"\n            >\n                Profile\n            </NavLink>\n\n            <NavLink                 \n                className=\"ml-lg-4\"\n                onClick={() => {}}\n            >\n                <i className=\"fas fa-sign-in-alt\"></i>Logout\n            </NavLink>\n        </>\n    );\n\n    const loggedOutIcons = (\n        <>\n            <NavLink \n                exact\n                className=\"ml-lg-4\"\n                activeClassName={styles.Active}\n                to=\"/signup\"\n            >\n                <i className=\"fas fa-user-plus\"></i>Sign Up\n            </NavLink>\n            <NavLink \n                exact\n                className=\"ml-lg-4\"\n                activeClassName={styles.Active}\n                to=\"/login\"\n            >\n                <i className=\"fas fa-sign-in-alt\"></i>Login\n            </NavLink>\n        </>\n    );\n\n        \n    return (\n        <Navbar expanded={expanded} className={styles.NavBar} expand=\"lg\" fixed=\"top\">\n            <Container fluid>\n                <NavLink to=\"/\">\n                    <Navbar.Brand className=\"pl-5\">\n                        <img src={logo} alt=\"logo\" height=\"150\" />\n                    </Navbar.Brand>\n                </NavLink>\n                \n                <Navbar.Toggle \n                    ref={ref}\n                    onClick={() => setExpanded(!expanded)} \n                    aria-controls=\"basic-navbar-nav\" \n                />\n                <Navbar.Collapse id=\"basic-navbar-nav\" className=\"pr-5\">\n                    <Nav className=\"ml-auto text-left\">\n                        <NavLink \n                            exact\n                            activeClassName={styles.Active}\n                            to=\"/\"\n                        >\n                            <i className=\"fas fa-home\"></i>Home\n                        </NavLink>\n                        <NavLink \n                            exact\n                            className=\"ml-lg-4\"\n                            activeClassName={styles.Active}\n                            to=\"/dogs\"\n                        >\n                            <i className=\"fas fa-dog\"></i>Our Dogs\n                        </NavLink>\n                        {currentUser ? loggedInIcons : loggedOutIcons}\n                    </Nav>\n                </Navbar.Collapse>\n            </Container>\n        </Navbar>\n    );\n};\n\nexport default NavBar;\n","import styles from \"./App.module.css\";\nimport NavBar from \"./components/NavBar\";\nimport Container from \"react-bootstrap/Container\";\nimport { Route, Switch } from \"react-router-dom\";\nimport \"./api/axiosDefaults\";\nimport { useCurrentUser } from \"./contexts/CurrentUserContext\";\n\nfunction App() {\n  const currentUser = useCurrentUser();\n  \n  return (\n    <div className={styles.App}>\n      <NavBar />\n      <Container fluid className={styles.Main}>  \n        <Switch>\n          <Route \n            exact \n            path=\"/\"\n            render={() => <h1>Home</h1>}\n          />\n          <Route \n            exact \n            path=\"/dogs\"\n            render={() => <h1>Our Dogs</h1>}\n          />\n          <Route \n            exact \n            path=\"/signup\"\n            render={() => <h1>Sign Up</h1>}\n          />\n          <Route \n            exact \n            path=\"/login\"\n            render={() => <h1>Login</h1>}\n          />\n          <Route render={()=> <p>Page not found</p>} />\n        </Switch>\n      </Container>\n    </div>\n  );\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}